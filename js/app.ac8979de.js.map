{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/scripts/constants.js","webpack:///./src/scripts/utility.js","webpack:///./src/scripts/globals.js","webpack:///./src/scripts/interactions.js","webpack:///./src/scripts/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","MAX_SCALE","EXCLUDED_NEIGHBORHOODS","Set","LA","properties","blurb","kind","transform","k","preprocess_region","arr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","reg","parent","err","return","REGIONS","neighborhoods","color","category","LARGE_REGIONS","SYMBOLS","elysium","d3shape","normal","haven","POIS","poitype","gps","concat","transformFromBbox","bbox","dx","width","dy","height","x","y","Math","max","min","region_comparefunc","a","b","score","slugify","_slugify","replace","maptransform","d3","CURRENT_FOCUS","ZOOM","d3zoom","scaleExtent","CON","on","attr","projection","d3geo","rotate","translate","scale","geo","all_regions","all_regions_map","Map","concat_regions","region","set","highlight","yes","util","classed","do_highlight","un_highlight","focus_region","regionname","zoomtarget","childdata","G","filter","datum","sort","zoom_to","text","html","selectAll","split","enter","append","childs","merge","each","sel","this","exit","remove","update_sidebar","_defaultRenderGeojsonCallback","render_geojson","id","classname","features","callback","style","getBBox","make_regions","regiondefs","namefunc","topo","geo2topo","hoods","values","objects","forEach","e","map","info","polys","obj","topojson","_objectSpread","error","console","Promise","all","fetch","then","res","json","geojson","has","regionfeatures","AREA_NAME","water","earth","pois","type","geometry","coordinates","symbolgen","size","coords"],"mappings":"aACA,SAAAA,EAAAC,GAQA,IAPA,IAMAC,EAAAC,EANAC,EAAAH,EAAA,GACAI,EAAAJ,EAAA,GACAK,EAAAL,EAAA,GAIAM,EAAA,EAAAC,EAAA,GACQD,EAAAH,EAAAK,OAAoBF,IAC5BJ,EAAAC,EAAAG,GACAG,EAAAP,IACAK,EAAAG,KAAAD,EAAAP,GAAA,IAEAO,EAAAP,GAAA,EAEA,IAAAD,KAAAG,EACAO,OAAAC,UAAAC,eAAAC,KAAAV,EAAAH,KACAc,EAAAd,GAAAG,EAAAH,IAKA,IAFAe,KAAAhB,GAEAO,EAAAC,QACAD,EAAAU,OAAAV,GAOA,OAHAW,EAAAR,KAAAS,MAAAD,EAAAb,GAAA,IAGAe,IAEA,SAAAA,IAEA,IADA,IAAAC,EACAf,EAAA,EAAiBA,EAAAY,EAAAV,OAA4BF,IAAA,CAG7C,IAFA,IAAAgB,EAAAJ,EAAAZ,GACAiB,GAAA,EACAC,EAAA,EAAkBA,EAAAF,EAAAd,OAA2BgB,IAAA,CAC7C,IAAAC,EAAAH,EAAAE,GACA,IAAAf,EAAAgB,KAAAF,GAAA,GAEAA,IACAL,EAAAQ,OAAApB,IAAA,GACAe,EAAAM,IAAAC,EAAAN,EAAA,KAIA,OAAAD,EAIA,IAAAQ,EAAA,GAKApB,EAAA,CACAqB,EAAA,GAGAZ,EAAA,GAGA,SAAAS,EAAA1B,GAGA,GAAA4B,EAAA5B,GACA,OAAA4B,EAAA5B,GAAA8B,QAGA,IAAAC,EAAAH,EAAA5B,GAAA,CACAK,EAAAL,EACAgC,GAAA,EACAF,QAAA,IAUA,OANAhB,EAAAd,GAAAa,KAAAkB,EAAAD,QAAAC,IAAAD,QAAAJ,GAGAK,EAAAC,GAAA,EAGAD,EAAAD,QAKAJ,EAAAO,EAAAnB,EAGAY,EAAAQ,EAAAN,EAGAF,EAAAS,EAAA,SAAAL,EAAAM,EAAAC,GACAX,EAAAY,EAAAR,EAAAM,IACA1B,OAAA6B,eAAAT,EAAAM,EAAA,CAA0CI,YAAA,EAAAC,IAAAJ,KAK1CX,EAAAgB,EAAA,SAAAZ,GACA,oBAAAa,eAAAC,aACAlC,OAAA6B,eAAAT,EAAAa,OAAAC,YAAA,CAAwDC,MAAA,WAExDnC,OAAA6B,eAAAT,EAAA,cAAiDe,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAvC,OAAAwC,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAvC,OAAA6B,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAS,EAAAc,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAtB,GACA,IAAAM,EAAAN,KAAAiB,WACA,WAA2B,OAAAjB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAL,EAAAS,EAAAE,EAAA,IAAAA,GACAA,GAIAX,EAAAY,EAAA,SAAAgB,EAAAC,GAAsD,OAAA7C,OAAAC,UAAAC,eAAAC,KAAAyC,EAAAC,IAGtD7B,EAAA8B,EAAA,GAEA,IAAAC,EAAAC,OAAA,aAAAA,OAAA,iBACAC,EAAAF,EAAAhD,KAAA2C,KAAAK,GACAA,EAAAhD,KAAAX,EACA2D,IAAAG,QACA,QAAAvD,EAAA,EAAgBA,EAAAoD,EAAAlD,OAAuBF,IAAAP,EAAA2D,EAAApD,IACvC,IAAAU,EAAA4C,EAIA1C,EAAAR,KAAA,SAEAU,8MCjJa0C,sBAAY,GAGZC,EAAyB,IAAIC,IAAI,CAC5C,iCACA,SACA,4BACA,4BACA,YACA,aACA,QACA,WACA,mBACA,eACA,eACA,iBACA,cACA,wBACA,cACA,cACA,qBACA,aACA,wCACA,gBACA,kBACA,UACA,gBACA,cAGWC,EAAK,CAChBC,WAAY,CACV7B,KAAM,qBACN8B,MAAK,u+BACLC,KAAM,SACNC,UAAW,CAACtB,EAAG,CAAC,EAAG,GAAIuB,EAAG,KAK9B,SAASC,EAAkBC,GAAK,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAC9B,QAAAC,EAAAC,EAAgBN,EAAhB5B,OAAAmC,cAAAN,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,EAAqB,KAAZS,EAAYL,EAAA/B,WACA8B,IAAfM,EAAIC,SACND,EAAIC,OAAS,uBAHa,MAAAC,GAAAV,GAAA,EAAAC,EAAAS,EAAA,YAAAX,GAAA,MAAAK,EAAAO,QAAAP,EAAAO,SAAA,WAAAX,EAAA,MAAAC,GAO9B,OAAOH,EAIF,IAAMc,EAAUf,EAAkB,CACvC,CACElC,KAAM,WACNkD,cAAe,WACfpB,MAAK,0kBACLC,KAAM,WACNoB,MAAO,WAET,CACEnD,KAAM,YACNkD,cAAe,YACfpB,MAAK,4dACLC,KAAM,eACNqB,SAAU,gBACVN,OAAQ,aACRK,MAAO,MAET,CACEnD,KAAM,YACNkD,cAAe,YACfpB,MAAK,kbACLC,KAAM,eACNqB,SAAU,gBACVN,OAAQ,aACRK,MAAO,MAET,CACEnD,KAAM,YACNkD,cAAe,CAAC,YAAa,iBAAkB,iBAAkB,kBAAmB,uBAAwB,kBAAmB,iBAAkB,cAAe,YAAa,UAAW,gBAAiB,eACzMpB,MAAK,moBACLC,KAAM,WACNoB,MAAO,sBAET,CACEnD,KAAM,eACNkD,cAAe,eACfpB,MAAK,inBACLC,KAAM,eACNe,OAAQ,aACRK,MAAO,MAET,CACEnD,KAAM,UACNkD,cAAe,YACfpB,MAAK,mNACLC,KAAM,eACNqB,SAAU,gBACVN,OAAQ,YACRK,MAAO,MAET,CACEnD,KAAM,0BACNkD,cAAe,CAAC,cAAe,kBAAmB,gBAAiB,kBAAmB,6BACtFpB,MAAK,qoBACLC,KAAM,eACNqB,SAAU,gBACVN,OAAQ,YACRK,MAAO,MAET,CACEnD,KAAM,cACNkD,cAAe,CAAC,gBAAiB,YAAa,kBAAmB,oBACjEpB,MAAK,6bACLC,KAAM,eACNqB,SAAU,gBACVN,OAAQ,aACRK,MAAO,QAKEE,EAAgBnB,EAAkB,CAC7C,CACElC,KAAM,YACN8B,MAAK,mUACLoB,cAAe,CACX,wCACA,wCACA,wBACA,0BACA,uCACA,oCACA,sCAEJnB,KAAM,WACNoB,MAAO,sBAET,CACEnD,KAAM,aACN8B,MAAK,kYACLoB,cAAe,CACX,yBACA,uBAEJnB,KAAM,WACNoB,MAAO,wBAKEG,EAAU,CACrBC,QAASC,IACTC,OAAQD,IACRE,MAAOF,KAuRIG,EAAOzB,EApRE,CACpB,CACElC,KAAM,UACN+B,KAAM,MACN6B,QAAS,UACTd,OAAQ,WACRhB,MAAK,2hBACL+B,IAAK,EAAE,YAAa,YAEtB,CACE7D,KAAM,0BACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,8fACL+B,IAAM,EAAE,YAAa,aAEvB,CACE7D,KAAM,gBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,g2BACL+B,IAAM,EAAE,YAAa,aAEvB,CACE7D,KAAM,UACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,irBACL+B,IAAM,EAAE,YAAa,aAEvB,CACE7D,KAAM,uBACN+B,KAAM,MACN6B,QAAS,UACTd,OAAQ,WACRhB,MAAK,slBACL+B,IAAM,EAAE,YAAa,aAEvB,CACE7D,KAAM,sBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,4mBACL+B,IAAM,MAER,CACE7D,KAAM,mBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,4RACL+B,IAAM,EAAE,YAAa,aAEvB,CACE7D,KAAM,0BACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,GACL+B,IAAM,MAER,CACE7D,KAAM,4BACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,kqBACL+B,IAAM,EAAE,YAAa,aAEvB,CACE7D,KAAM,8BACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,8ZACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,cACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,gzBACL+B,IAAM,MAER,CACE7D,KAAM,uBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,WACRhB,MAAK,4cACL+B,IAAM,EAAE,YAAa,cAqL2BC,OAjL7B,CACrB,CACE9D,KAAM,kBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,0TACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,6BACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,+0BACL+B,IAAK,EAAE,WAAY,aAErB,CACE7D,KAAM,qBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,oaACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,uBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,oSACL+B,IAAK,EAAE,UAAW,aAEpB,CACE7D,KAAM,eACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,ycACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,iBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,8XACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,oBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,iRACL+B,IAAK,EAAE,YAAa,cAID,CACrB,CACE7D,KAAM,kBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,aACRhB,MAAK,w2BACL+B,IAAK,MAEP,CACE7D,KAAM,UACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,aACRhB,MAAK,mGACL+B,IAAK,EAAE,WAAY,YAErB,CACE7D,KAAM,sBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,eACRhB,MAAK,yeACL+B,IAAK,EAAE,WAAY,aAErB,CACE7D,KAAM,sBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,6sBACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,cACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,aACRhB,MAAK,yQACL+B,IAAK,EAAE,YAAa,YAEtB,CACE7D,KAAM,4BACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,aACRhB,MAAK,sNACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,2BACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,cACRhB,MAAK,iRACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,gBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,aACRhB,MAAK,kUACL+B,IAAK,MAEP,CACE7D,KAAM,mCACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,oZACL+B,IAAK,EAAE,YAAa,YAEtB,CACE7D,KAAM,oBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,eACRhB,MAAK,m/BACL+B,IAAK,EAAE,YAAa,cAID,CACrB,CACE7D,KAAM,oBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,6OACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,mBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,+8BACL+B,IAAK,EAAE,YAAa,aAEtB,CACE7D,KAAM,mBACN+B,KAAM,MACN6B,QAAS,SACTd,OAAQ,YACRhB,MAAK,++BACL+B,IAAK,EAAE,UAAW,aAEpB,CACE7D,KAAM,iCACN+B,KAAM,MACN6B,QAAS,UACTd,OAAQ,YACRhB,MAAK,00BACL+B,IAAK,EAAE,YAAa,uCCrajB,SAASE,EAAkBC,GAChC,IAAMC,EAAKD,EAAKE,MACVC,EAAKH,EAAKI,OACVC,EAAIL,EAAKK,EAAIJ,EAAK,EAClBK,EAAIN,EAAKM,EAAIH,EAAK,EAElBlC,EAAIsC,KAAKC,IAAI,EAAGD,KAAKE,IAAIhD,EAAW,GAAM8C,KAAKC,IAAIP,EAAK,IAAKE,EAAK,OAGxE,MAAO,CAAElC,IAAGvB,EADF,CAAC,IAAUuB,EAAIoC,EAAG,IAAUpC,EAAIqC,IAIrC,SAASI,EAAmBC,EAAGC,GACpC,IAAIC,EAAQ,EAYZ,MAX0B,iBAAtBF,EAAE9C,WAAWE,OACf8C,GAAS,IAEe,iBAAtBD,EAAE/C,WAAWE,OACf8C,GAAS,IAEPF,EAAE9C,WAAW7B,KAAO4E,EAAE/C,WAAW7B,KACnC6E,GAAS,EACAF,EAAE9C,WAAW7B,KAAO4E,EAAE/C,WAAW7B,OAC1C6E,GAAS,GAEJA,EAGF,SAASC,EAAQvF,GACtB,OAAOwF,EAASxF,EAAEyF,QAAQ,SAAU,uCCrClCC,EAAeC,IAAU,iBAClBC,EAAgB,qBAKpB,IAAIC,EAAOC,MACfC,YAAY,CAAC,GAAIC,IACjBC,GAAG,OAAQ,WACV,IAAM9E,EAAIwE,IAASlD,UACnBiD,EAAaQ,KAAK,YAAlB,aAAA3B,OAA4CpD,EAAE2D,EAA9C,MAAAP,OAAoDpD,EAAE4D,EAAtD,YAAAR,OAAkEpD,EAAEuB,EAApE,QAMOyD,GAHQR,IAAU,UAC1BzG,KAAK2G,GAEgBO,MACvBC,OFrBwB,CAAC,WAAY,UEsBrCC,UFpB2B,CAAC,kBAAmB,oBEqB/CC,MFpBuB,qBEsBbC,EAAMJ,IAAcD,GAEpBM,EAAc,CAACT,GACfU,EAAkB,IAAIC,IAG1B,SAASC,EAAehE,GAC7B6D,EAAcA,EAAYlC,OAAO3B,GADC,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAElC,QAAAC,EAAAC,EAAmBN,EAAnB5B,OAAAmC,cAAAN,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,EAAwB,KAAfgE,EAAe5D,EAAA/B,MACtBwF,EAAgBI,IAAID,EAAOvE,WAAW7B,KAAMoG,IAHZ,MAAArD,GAAAV,GAAA,EAAAC,EAAAS,EAAA,YAAAX,GAAA,MAAAK,EAAAO,QAAAP,EAAAO,SAAA,WAAAX,EAAA,MAAAC,IAFpC2D,EAAgBI,IAAI,qBAAsBd,GCf1C,SAASe,EAAUvG,EAAGwG,GACpBrB,IAAU,IAAMsB,EAAazG,EAAE8B,WAAW7B,OACvCyG,QAAQ,cAAeF,GAG5B,SAASG,EAAa3G,GACpBuG,EAAUvG,GAAG,GAGf,SAAS4G,EAAa5G,GACpBuG,EAAUvG,GAAG,GAmER,SAAS6G,EAAaC,GAC3B,IAEoB7G,EAAM8G,EAFpB/G,EAAIkG,EAAgB5F,IAAIwG,GAE1BE,EAAY,GACZC,IAAoBjH,EAAE8B,WAAW7B,MAA4B,uBAApBgH,GAK3ChH,EAAOD,EAAE8B,WAAW7B,KACpB8G,EAAa/G,EAAE8B,WAAWG,WAE1B+E,EAAYf,EAAYiB,OAAO,SAAAC,GAAK,OAAIA,EAAMrF,WAAWiB,SAAW9C,KAC1DmH,KAAKX,GDjGjBrB,ECmGoBnF,EAGpBkF,IAAa,WACVuB,QAAQ,WAAY,SAAA1G,GAAC,MAA0B,uBAAtBA,EAAE8B,WAAW7B,MAAiCD,EAAE8B,WAAW7B,OAASgH,IAGvE,OAArBjH,EAAE8B,WAAWgC,KAxGnB,SAAiBiD,GACf5B,IAAU,UACPzG,KAAKuI,EAAOhF,UAAWqD,IAAoBQ,UAAUiB,EAAWpG,EAAE,GAAIoG,EAAWpG,EAAE,IAAIoF,MAAMgB,EAAW7E,IAuGzGmF,CAAQN,GAvFZ,SAAwB/G,EAAGC,EAAM+G,GAC/B7B,IAAU,gBACPmC,KAAKrH,GAER,IAAM8B,EAAQ/B,EAAE8B,WAAWC,MAAQ/B,EAAE8B,WAAWC,MAAQ,GACxDoD,IAAU,gBACPoC,KAAK,IACLC,UAAU,KACV5J,KAAKmE,EAAM0F,MAAM,OACjBC,QACAC,OAAO,KACPJ,KAAK,SAAAvH,GAAC,OAAIA,IAETA,EAAE8B,WAAW+B,QACfsB,IAAU,YACPmC,KADH,IAAAvD,OACY/D,EAAE8B,WAAW+B,QADzB,MAGAsB,IAAU,YACPmC,KAAK,IAGV,IAAIM,EAASzC,IAAU,oBACpBqC,UAAU,iBACV5J,KAAKoJ,EAAW,SAAAhH,GAAC,OAAIA,EAAE8B,WAAW7B,OACrC2H,EAAOF,QACJC,OAAO,MACPjB,QAAQ,gBAAgB,GACxBmB,MAAMD,GACNE,KAAK,SAAS9H,GACb,IAAI+H,EAAM5C,IAAU6C,MACM,QAAtBhI,EAAE8B,WAAWE,KACf+F,EAAIrB,QAAJ,gBAAA3C,OAA4B/D,EAAE8B,WAAW+B,UAAW,GAEpDkE,EAAIrB,QAAJ,QAAA3C,OAAoB/D,EAAE8B,WAAWE,OAAQ,KAG5C2F,OAAO,QACPjB,QAAQ,WAAW,GACnBY,KAAK,SAAAtH,GAAC,OAAIA,EAAE8B,WAAW7B,OACvBwF,GAAG,QAAS,SAAAzF,GAEX4G,EAAa5G,GAEb6G,EAAa7G,EAAE8B,WAAW7B,QAE3BwF,GAAG,YAAakB,GAChBlB,GAAG,WAAYmB,GAClBgB,EAAOK,OACJC,SAGClI,EAAE8B,WAAWiB,OACfoC,IAAU,YACPuB,QAAQ,UAAU,GAClBjB,GAAG,QAAS,WACXoB,EAAa7G,EAAE8B,WAAWiB,UAG9BoC,IAAU,YACPuB,QAAQ,UAAU,GA8BvByB,CAAenI,EAAGC,EAAM+G,IApBtBH,EAAa,sBAuBjB,IAAMuB,EAAgC,SAAApI,KAC/B,SAASqI,EAAeC,EAAIC,EAAWC,EAAUC,GACtDA,EAAWA,GAAYL,EACvBjD,IAAUmD,GACPd,UAAU,QACV5J,KAAK4K,GACLd,QACAC,OAAO,QACPjB,QAAQ6B,GAAW,GACnB7B,QAAQ,eAAgB,SAAA1G,GAAC,MAA0B,iBAAtBA,EAAE8B,WAAWE,OAC1C0D,KAAK,IAAKM,GACVN,KAAK,KAAM,SAAA1F,GAAC,OAAIyG,EAAazG,EAAE8B,WAAW7B,QAC1CyI,MAAM,OAAQ,SAAA1I,GAAC,OAAIA,EAAE8B,WAAWsB,QAChC0E,KAAK,SAAS9H,GACbA,EAAE8B,WAAWG,UAAYwE,EAAuBuB,KAAKW,aAEtDlD,GAAG,YAAagD,GAChBhD,GAAG,QAAS,SAAAzF,GAAC,OAAI6G,EAAa7G,EAAE8B,WAAW7B,2cC5HhD,SAAS2I,EAAaJ,EAAUK,EAAYC,GAC1C,IAAIC,EAAOC,YAASR,GAEhBS,EAAQ,IAAI9C,IAShB,OARA5H,OAAO2K,OAAOH,EAAKI,SAASC,QAAQ,SAAAC,GAAC,OAAIJ,EAAM3C,IAAIwC,EAASO,GAAIA,KAClDR,EAAWS,IAAI,SAAAC,GAC3B,MAAmC,iBAAxBA,EAAKpG,cACP,CAAEoG,OAAMC,MAAO,CAACP,EAAM3I,IAAIiJ,EAAKpG,iBAE/B,CAAEoG,OAAMC,MAAOD,EAAKpG,cAAcmG,IAAI,SAAAtJ,GAAC,OAAIiJ,EAAM3I,IAAIN,QAGjDsJ,IAAI,SAAAtJ,GACjB,IACE,IAAIyJ,EAAMC,IAAeX,EAAM/I,EAAEwJ,OAEjC,OADAC,EAAI3H,WAAJ6H,EAAA,CAAkB1J,KAAMD,EAAEuJ,KAAKtJ,MAASD,EAAEuJ,MACnCE,EACP,MAAOG,GAGP,OAFAC,QAAQD,MAAR,wBAAA7F,OAAsC/D,EAAEuJ,KAAKtJ,KAA7C,MACA4J,QAAQD,MAAMA,GACP,QAER1C,OAAO,SAAAlH,GAAC,OAAU,OAANA,IAIjB8J,QAAQC,IAAI,CACVC,MAAM,iCACHC,KAAK,SAAAC,GACJ,OAAOA,EAAIC,SAEZF,KAAK,SAAAG,GACJA,EAAQ5B,SAAW4B,EAAQ5B,SAAStB,OAAO,SAAAlH,GAAC,OAAKwF,EAA2B6E,IAAIrK,EAAE8B,WAAW7B,QAS7F,IAAIqK,EAAiB1B,EAAawB,EAAQ5B,SAAUhD,EAAa,SAAAxF,GAAC,OAAIA,EAAE8B,WAAW7B,OACnFmG,EAAekE,GACfjC,EAAe,iBAAkB,SAAUiC,KAG/CN,MAAM,6BACHC,KAAK,SAAAC,GACJ,OAAOA,EAAIC,SAEZF,KAAK,SAAAG,GACJ,IAAIE,EAAiB1B,EAAawB,EAAQ5B,SAAUhD,EAAmB,SAAAxF,GAAC,OAAIA,EAAE8B,WAAWyI,YACzFnE,EAAekE,GACfjC,EAAe,iBAAkB,SAAUiC,OAGhDL,KAAK,SAAAjK,GAAC,OAAI6G,EAAa,wBAGxBmD,MAAM,yBACHC,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAlB,GACJ5D,IAAU,YACPwC,OAAO,QACPjB,QAAQ,SAAS,GACjBS,MAAMuC,IAAiBX,EAAMA,EAAKI,QAAQqB,QAC1C9E,KAAK,IAAKM,GACbb,IAAU,YACPwC,OAAO,QACPjB,QAAQ,SAAS,GACjBS,MAAMuC,IAAiBX,EAAMA,EAAKI,QAAQsB,QAC1C/E,KAAK,IAAKM,KAIjB,IAAM0E,EAAOlF,EAAS8D,IAAI,SAAAtJ,GAAC,MAAK,CAC9B2K,KAAQ,UACRC,SAAU,CACRD,KAAQ,QACRE,YAAa7K,EAAE8D,IAAM9D,EAAE8D,IAAM,EAAE,GAAI,IAErChC,WAAU6H,EAAA,GACL3J,MAGPoG,EAAesE,GAGf,IAAII,EAAYrH,MAAiBsH,KAAK,GACtC5F,IAAU,SACPqC,UAAU,QACV5J,KAAK8M,GACLhD,QACAC,OAAO,QACPjB,QAAQ,UAAU,GAClBoB,KAAK,SAAS9H,GAEb,IAAMgL,EAASrF,EAAW3F,EAAE4K,SAASC,aACrC7K,EAAE8B,WAAWG,UAAYwE,EAAuB,CAAEnC,EAAG0G,EAAO,GAAIzG,EAAGyG,EAAO,GAAI7G,MAAO,EAAGE,OAAQ,MAEjGqB,KAAK,KAAM,SAAA1F,GAAC,OAAIyG,EAAazG,EAAE8B,WAAW7B,QAC1CyF,KAAK,YAAa,SAAA1F,GAAC,mBAAA+D,OAAiB4B,EAAW3F,EAAE4K,SAASC,aAAvC,OACnBnF,KAAK,IAAK,SAAA1F,GAAC,OAAI8K,EAAUH,KAAKnF,EAAYxF,EAAE8B,WAAW+B,SAAxCiH,KACfrF,GAAG,QAAS,SAAAzF,GAAC,OAAI6G,EAAa7G,EAAE8B,WAAW7B","file":"js/app.ac8979de.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([136,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as d3shape from 'd3-shape';\n\nexport const LA_ROTATE = [118.243683, 33.9735];\nexport const LA_LONGLAT = [-118.243683, 33.9735];\nexport const LA_TRANSLATE = [523.6547830169354, 28062.73757963573];\nexport const LA_SCALE = 16982.165984676663;\nexport const MAX_SCALE = 4;\n\n\nexport const EXCLUDED_NEIGHBORHOODS = new Set([\n  'Unincorporated Catalina Island',\n  'Avalon',\n  'Northwest Antelope Valley',\n  'Northeast Antelope Valley',\n  'Lancaster',\n  'Agua Dulce',\n  'Acton',\n  'Palmdale',\n  'Lake Los Angeles',\n  'Green Valley',\n  'Leona Valley',\n  'Elizabeth Lake',\n  'Lake Hughes',\n  'Desert View Highlands',\n  'Sun Village',\n  'Quartz Hill',\n  'Northwest Palmdale',\n  'Littlerock',\n  'Unincorporated Santa Susana Mountains',\n  'Santa Clarita',\n  'Stevenson Ranch',\n  'Castaic',\n  'Hasley Canyon',\n  'Val Verde'\n]);\n\nexport const LA = {\n  properties: {\n    name: 'Los Angeles County',\n    blurb: `The gem of the West Coast. Rattled by the all-out gang wars of the 1920s, an unprecedented investment and redevelopment effort in the 50s by large companies such as Venture Corporation, among others, has managed to reinstall some degree of safety to its streets. Enough to live without having to wonder if you'll never wake up, at least. On the Kindred side of things, Baron Baldwin, the Brujah leader of the Anarch movement which calls LA home, has displayed political acumen on par with his predecessor. By grabbing hands with the venerable Ventrue Clan Elder/converted Anarch, Aina Gladvold, he has managed to keep the Anarch's various sub-factions from collapsing into orderless squabbling, as well as hedging out Camarilla and Giovanni interests. But this fragile peace threatens to be disturbed: the arrival of Archon Khoroi and the installation of a false Prince are not good omens for the movement. Only time will tell whether LA will remain the cultural capital of the Anarch Free State.`,\n    kind: 'county',\n    transform: {t: [0, 0], k: 1}\n  }\n};\n\n// Sets parent to LA if null\nfunction preprocess_region(arr) {\n  for (let reg of arr) {\n    if (reg.parent === undefined) {\n      reg.parent = 'Los Angeles County';\n    }\n  }\n\n  return arr;\n}\n\n// Combinations of neighborhoods\nexport const REGIONS = preprocess_region([\n  {\n    name: 'Downtown',\n    neighborhoods: 'Downtown',\n    blurb: `The streets of Downtown Los Angeles are cramped, making pedestrians feel claustrophobic and small as they look up at the towering structures of concrete and steel and glass. This is the focal point of LA's culture, business, and nightlife. It's fitting that it's become a gathering point for most of Kindred political affairs as well. Much of the action is tucked away behind closed doors, sometimes on the top floor of a high-rise skyscraper, sometimes in an exclusive nightclub. But even for the less connected or less important there are distractions available. Beware the alleys.`,\n    kind: 'district',\n    color: '#807dba'\n  },\n  {\n    name: 'Chinatown',\n    neighborhoods: 'Chinatown',\n    blurb: `Ever since early on in its history, Los Angeles has had a significant population of Asian Americans, and Chinese Americans in particular. The streets and neighborhoods of Chinatown are like a little slice of Canton scattered across the city's matrix of streets, with bilingual menus almost as common as ones written purely in Chinese. The current Chinatown is actually not the historic one that inspired many Hollywood movies--that one was demolished for a railway station.`,\n    kind: 'neighborhood',\n    category: 'Neighborhoods',\n    parent: 'Inner City',\n    color: null\n  },\n  {\n    name: 'Koreatown',\n    neighborhoods: 'Koreatown',\n    blurb: `A rectangular neighborhood in the LA metro area, covering a roughly 10 street by 15 avenue area. Ever since the 1992 LA Riots, Koreatown has become a community-driven neighborhood, with nonprofits such as the KYCC and KIWA as well as churches creating neighborhood solidarity. Interestingly enough, the actual residents are majority Latinx, and it's not uncommon to see Latin Americans talking to Korean Americans in fluent Korean.`,\n    kind: 'neighborhood',\n    category: 'Neighborhoods',\n    parent: 'Inner City',\n    color: null\n  },\n  {\n    name: 'Hollywood',\n    neighborhoods: ['Hollywood', 'East Hollywood', 'West Hollywood', 'Hollywood Hills', 'Hollywood Hills West', 'North Hollywood', 'Universal City', 'Studio City', 'Los Feliz', 'Burbank', 'Griffith Park', 'Toluca Lake'],\n    blurb: `The winding streets of Hollywood's rolling hills feature palm trees, incredible vistas, and rich, luxury homes peppered across the landscape. Though it used to be where the vast majority of the movie industry filmed its works, it is now more of a tourist spot than anything else. One of the least diverse areas in the city, the roughly twenty thousand people living there are typically wealthy homeowners or middle-class renters. Despite its seemingly safe, upper-class appearance, one should still be careful when walking through the streets at night, as there are predators of all kinds looking to take advantage of unsuspecting citizens.`,\n    kind: 'district',\n    color: 'rgb(158, 154, 200)'\n  },\n  {\n    name: 'Santa Monica',\n    neighborhoods: 'Santa Monica',\n    blurb: `Santa Monica has been historically known as a beach town, but a recent boom in the economy, including several major household names such as Hulu or Universal Music has revitalized its downtown area. The rest of the town, however, is populated by lower-middle class individuals and is plagued by crime and disenfranchised youth. Aside from the tourist-infested pier, there are blocks of apartment buildings, warehouses, industrial facilities, and commercial establishments. Up until recently, the town had been fairly undisturbed, but the so-called 'vampire murders' have perhaps caused the heaviness hanging over the town.`,\n    kind: 'neighborhood',\n    parent: 'Inner City',\n    color: null\n  },\n  {\n    name: 'Seaside',\n    neighborhoods: 'San Pedro',\n    blurb: `Seaside, also known as San Pedro, is a small shipping town an optimistic 20 minutes south of LA. It has changed from a sleepy fishing town to a working class community centered around the Port of Los Angeles.`,\n    kind: 'neighborhood',\n    category: 'Neighborhoods',\n    parent: 'Outskirts',\n    color: null\n  },\n  {\n    name: 'Angeles National Forest',\n    neighborhoods: ['Ridge Route', 'Castaic Canyons', 'Angeles Crest', 'Tujunga Canyons', 'Southeast Antelope Valley'],\n    blurb: `The Angeles National Forest is a vast wooded area spanning both the San Gabriel Mountains and the Sierra Pelona Mountains. This range of wilderness surrounds LA in a wall of green, creating a wonderful place for citizens to retreat to when they find themselves overwhelmed by concrete-bound city life. But the massive forest is not as empty as it would seem. Critters, creatures, beasts and predators roam the lands, stalking their next meal in hopes that their survival will be guaranteed for another day. Those inexperienced with surviving outdoors should not tread too far, as there are only so many days rescue teams can afford to search.`,\n    kind: 'neighborhood',\n    category: 'Neighborhoods',\n    parent: 'Outskirts',\n    color: null\n  },\n  {\n    name: 'Eastside LA',\n    neighborhoods: ['Boyle Heights', 'El Sereno', 'Lincoln Heights', 'East Los Angeles'],\n    blurb: `One of LA’s oldest neighborhoods, Eastside LA has a lineage of culture that can be found in its shops, businesses, and community.While its majority (96%) Latinx community members have pushed to improve quality of life, they also stand on the front line protecting the neighborhood’s vibrant history and traditions from corporate interests who would seek to gentrify it. It is composed to East LA, Boyle Heights, and a few other neighborhoods.`,\n    kind: 'neighborhood',\n    category: 'Neighborhoods',\n    parent: 'Inner City',\n    color: null\n  },\n]);\n\n// Combinations of city planning areas\nexport const LARGE_REGIONS = preprocess_region([\n  {\n    name: 'Outskirts',\n    blurb: `Despite its name, the outskirts of LA city are still very much urban, though there are more unused lots and the asphalt is slightly more cracked that in the city proper. Out here is where the true wealth of LA is displayed, ranging from temples and churches to mansions, universities, research facilities and graveyards.`,\n    neighborhoods: [\n        'West San Gabriel Valley Planning Area',\n        'East San Gabriel Valley Planning Area',\n        'Gateway Planning Area',\n        'South Bay Planning Area',\n        'Santa Monica Mountains Planning Area',\n        'San Fernando Valley Planning Area',\n        'Santa Clarita Valley Planning Area'\n      ],\n    kind: 'district',\n    color: 'rgb(242, 240, 247)'\n  },\n  {\n    name: 'Inner City',\n    blurb: `The part of LA city that isn't downtown. Gang violence and rackets have massively died down since the turf wars of the 1920s, but in recent times organized crime has started creeping back into the alleys from the outskirts to where they had been banished. Even so, the streets remain relatively safe for now. It is suggested to hand any robbers your money rather than risk your life.`,\n    neighborhoods: [\n        'Westside Planning Area',\n        'Metro Planning Area'\n      ],\n    kind: 'district',\n    color: 'rgb(203, 201, 226)'\n  }\n]);\n\n// Map PoI Types to symbols\nexport const SYMBOLS = {\n  elysium: d3shape.symbolWye,\n  normal: d3shape.symbolCircle,\n  haven: d3shape.symbolCross,\n}\n\nconst pois_downtown = [\n  {\n    name: 'Requiem',\n    kind: 'poi',\n    poitype: 'elysium',\n    parent: 'Downtown',\n    blurb: `A popular public nightclub for both kindred and kine. The lower level is primarily where the kine congregate, featuring flashing lights, throbbing bass, and a constantly packed dance floor. The music seems to be generic pop of all sorts, ranging from country pop to hip-hop, but always whatever happens to be hot on the radio lately.\\nThe upper level serves blood (1 BP a night) for kindred with backdoor access. It seems to be somewhat classier than the nightclub below, with a more relaxed atmosphere. This is an Anarch owned Elysium.`,\n    gps: [-118.2611908, 34.042485] // GPS can be omitted to not display on map, only on sidebar\n  },\n  {\n    name: 'Good Samaritan Hospital',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `Founded in 1885, Good Samaritan Hospital is located on Wilshire Blvd.The hospital is located in Downtown, near the Financial District, between the Northern and Southern neighborhoods of Westlake. Many of Skid Row's victims are admitted to this hospital due to its location.\\nGood Samaritan Hospital is a progressive, tertiary, not-for-profit hospital. The hospital was historically affiliated with the Episcopal Church, but currently pastoral care services are available for all religions and denominations.`,\n    gps:  [-118.2674585, 34.0546739] \n  },\n  {\n    name: 'Venture Tower',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `Venture Tower is an opulent, hundred-story structure owned by local businessman, Edgar Henderson. It is currently the central meeting place for all of the Camarilla's interests, political, commercial, and otherwise. Reported to be the tallest building west of the Mississippi, the tower also features the offices of Dwayne LaCroix and the Insurrection Baby Formula Company. The 9th level of the adjacent side building includes the offices of Dodecatechnoco, whereas the 10th floor houses a food court. In addition to street level access, card-carrying members of the Camarilla can also enter from the underground garage. Members can use their key-card to access the elevators to reach the top floor. The bottom floor is often manned by at least one ghoul receptionist. The top floor is an expansive, lavish room designed to house large and prestigious meetings.`,\n    gps:  [-118.2560681, 34.0506548] \n  },\n  {\n    name: 'Skidrow',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `The most dangerous area in Downtown Los Angeles, by far. While the average city streets in L.A. are dangerous, Skid Row is the crown jewel for homelessness, derelict behavior, drug-using, and violence. The area is defined as being North of 7th St., East of Main St., South of 3rd St., and West of Alameda St., housing one of the largest stable homeless populations in all of the United States. Roughly 8000 homeless people call this section of town their home, and many of them have an impossible time trying to leave. Horrible practices abound, such as extortion, price-gauging, addiction-based street economies, sex-for-food, blood-for-gold and a litany of other criminal enterprises.`,\n    gps:  [-118.2490746, 34.0422894],\n  },\n  {\n    name: 'The Hole in the Wall',\n    kind: 'poi',\n    poitype: 'elysium',\n    parent: 'Downtown',\n    blurb: `A literal hole in the wall where people are reportedly seeing coming and going. Why this place seems to be such a popular hang-out is unclear. Inside the hole is a dilapidated room full of debris and trash. On one wall runs a large crack. There doesn't seem to be anything special about the room, in particular, but there are several notable markings on the walls among the graffiti. On the rightmost wall, near the floor, there is one word carved into the wooden trim, which is drawn over in red lipstick. Baron Baldwin holds his office upstairs. Appointments can be made through his secretary.`,\n    gps:  [-118.2501907, 34.0393514],\n  },\n  {\n    name: 'Frequency Jazz Club',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `The Frequency Club is a recently opened venue by Dominique Allary, a popular neo-soul/R&B singer turned entrepreneur. The space is a two floor building that is decorated with a modern-dusted 60's aesthetic. Every night, there are jam sessions where artists of all genres can come in and perform freely. Those that show the most talent are even allowed into the VIP section on the first floor to talk to Dominique herself. The bar is a bit pricey, but many say the drinks are actually worth it. Whispers among the local Kindred state that the second floor is where the proprietor of the club entertains special guests.`,\n    gps:  null,\n  },\n  {\n    name: 'Wallace Law Firm',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `A nondescript modern building with enough glass to give the illusion the building is made of the substance. It has 5 floors, each of which dedicated to the law firm founded by Abraham Wallace in 1960.\\nWebsite: <a href='#'>wallacelaw.com</a>\\n<b>Managing Partner</b>: Eleanor Abate`,\n    gps:  [-118.2560844, 34.0498332],\n  },\n  {\n    name: 'Beaumont Medical Center',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: ``,\n    gps:  null,\n  },\n  {\n    name: 'St Vincent de Paul Church',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `A Roman Catholic institution built in the 1920s, paid for by local oilman Edward J. Doheny. Due to its original funding, the church has come to be known as the Church of Holy Oils. It is featured prominently in Hollywood movies, such as Arnold Schwarzenegger's 1999 film, End of Days, in which the hero battles Satan in the climax of the story. Other films such as Constantine, television series such as Charmed, and musical bands such as Warrant have all made use of the structure's magnificent, gothic interior designs. The opulent altar at the forefront of the assembly has several depictions of Holy Gospel, most notably the crucifixion of Jesus Christ in the center.`,\n    gps:  [-118.2769677, 34.0282625],\n  },\n  {\n    name: 'Los Angeles Central Library',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `The historic Central Library was constructed in 1926 and is a Downtown Los Angeles landmark. The Central Library complex is the third largest public library in the United States in terms of book and periodical holdings. The Library's Rare Books Department is located in this building. This remains an important research library, despite the development of accessible databases and public access to the Internet.`,\n    gps: [-118.2572776, 34.0502553],\n  },\n  {\n    name: 'The Machine',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `Your friendly neighborhood gay nightclub, filled with queens, divas, and a rainbow of colorful customers, the Machine is the most popular spot among dozens of similar clubs scattered across L.A. With two full bars, one upstairs and another in the basement, the club replaces a typical bar's Happy Hour promotion with their own branded special called \"Two Fingers Deep\", advertising half-prices for all drink orders that lower a bottle's alcohol volume by two fingers. Nothing sells drinks like eye-contact, and that's what you get when you come inside this place. It is dimly-lit except for the neon strips of LEDs that trim the floors and ceilings. Every half-hour, the color cycles into another, from Roy all the way down G. into Biv, creating dynamic, changing moods. This location is owned by Jacob Barrett.`,\n    gps:  null,\n  },\n  {\n    name: 'LA Convention Center',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Downtown',\n    blurb: `The LA Convention Center (LACC) is located in the heart of downtown LA and is the premiere location for many conferences, trade shows and exhibitions, boasting over 720,000 sqft of exhibit hall, 147,000 sqft of meeting room space, and a 5600-vehicle parking lot. Although last year's terrorist attack had briefly dampened enthusiasm for this venue, the lack of comparable alternative means that LACC is still a relevant part of the downtown cultural mosaic.`,\n    gps:  [-118.2717511, 34.0403251],\n  }\n];\n\nconst pois_hollywood = [\n  {\n    name: 'Carvoletti Cafe',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Hollywood',\n    blurb: `A newcomer to the Hollywood upscale dining scene, this Italian restaurant caters to those of means. Located near Paramount Pictures, it is one of the most popular places to dine in the evenings and is open late. It is rumored that the restaurant is owned by the Giovanni, or is at least connected to the family.`,\n    gps: [-118.3278168, 34.0921122]\n  },\n  {\n    name: 'Hollywood Forever Cemetary',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Hollywood',\n    blurb: `The Hollywood Forever Cemetery is one of L.A.'s most famously morbid features. The land within the walls is hauntingly beautiful, well manicured by the groundskeepers, who prim and trim the many plants and bushes that breath life into an otherwise cold and lifeless place. Aside from a large pond in the center, there are hundreds of crypts, above ground tombs, monuments, statues, and memorial plinths. Many souls have come to rest in this location, none of whom have been forgotten. Aside from a couple of damaged stone crypts and busted marble walls, the cemetery is in good shape. Unfortunately, this beauty is not as apparent after dusk, when dark denizens of the night come out of their resting places. Creatures lurking in the shadows wait patiently to lure in one of the foolish goth kids that tend to sneak in through hidden entrances.`,\n    gps: [-118.321202, 34.0887856,]\n  },\n  {\n    name: 'Paramount Pictures',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Hollywood',\n    blurb: `Paramount Pictures is one of the world's most recognized and celebrated film studios. The Viacom-owned corporation is located in Hollywood. Secretly, however, every Toreador in L.A. knows it to be one of the major strongholds of the Clan; the studio is secretly controlled by the Toreadors, and is often host to their meetings and even rarely some of their legendary social balls or gatherings for all select Kindred.`,\n    gps: [-118.3709955, 34.0763376]\n  },\n  {\n    name: 'The Snakehole Lounge',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Hollywood',\n    blurb: `Perhaps at odds with the wilder Hollywood party scene, the Snakehole Lounge is a quiet bar tucked into an equally quiet neighborhood. Its relaxed atmosphere meshes well with the owners' preference to feature many local bands, ranging the genre gamut from hard rock to acoustic indie music.`,\n    gps: [-118.35849, 34.0895334]\n  },\n  {\n    name: 'Walk of Fame',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Hollywood',\n    blurb: `The Hollywood Walk of Fame is am infamous series of brass and terrazzo stars embedded in the sidewalks along Hollywood Boulevard and Vine Street. A popular tourist attraction, this monument to stardom attracts millions of tourists to touch the imprints where their favorite stars' once cast their hands. Over 2600 names have been added to the ever-growing list of actors, directors, producers, musicians, singers, performers and other various characters.`,\n    gps: [-118.3358652, 34.1016691]\n  },\n  {\n    name: 'Hollywood Sign',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Hollywood',\n    blurb: `H O L L Y W O O D is the famous landmark that gives the town international recognition due to its iconic imagery in entertainment media. The white letters are each 44 foot tall and spans a length of 352 feet. It is forbidden to walk up and touch the sign due to its security restrictions in Griffith Park, but that doesn't stop certain motivated individuals from doing it anyway.`,\n    gps: [-118.3238652, 34.1340213]\n  },\n  {\n    name: 'Blessed Sacrament',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Hollywood',\n    blurb: `A Roman Catholic church in the heart of Hollywood that serves an urban, multi-ethnic community. Dedicated in 1928, it has thrived in part thanks to the contributions of many old-time Hollywood stars. Its dramatic interior is intentionally modeled after San Pedro Church.`,\n    gps: [-118.3372926, 34.0985135]\n  }\n];\n\nconst pois_innercity = [\n  {\n    name: 'Tremere Chantry',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Inner City',\n    blurb: `One of the finest Chantries on the West Coast, the building is one of two havens protected by the Regent, Conrad Lehmann. It is a place where Tremere may safely reside without threat from other clans. It is an unassuming building, slightly run down at first glance, but otherwise the property is well-maintained. It bears a single gas lantern which illuminates its front entrance. This building is protected by a series of intersecting hallways, some Tremere sorcery which leaves uneducated guests lost like in a cornfieldn. Many hallways lead to the same place, and most of them right back to the starting point, inviting unwelcome guests to leave via the front door. If one knows the right turns, they find themselves in the chantry's main rooms, a sanctuary, library and a small laboratory. The buildings around the Chantry are all owned by the Regent, for security.`,\n    gps: null,\n  },\n  {\n    name: 'LAPD HQ',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Inner City',\n    blurb: `The home of the LAPD, a massive building that looks like a glass cube held in a white tile vice.`,\n    gps: [-118.271065, 34.053575],\n  },\n  {\n    name: 'UCLA Medical Center',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Santa Monica',\n    blurb: `UCLA Medical Center - Santa Monica is a modern 300-bed medical center with surgical wards, ER and ICU that also serves as a teaching hospital. Many Santa Monica patients are transferred here to take advantage of its medical equipment, surgical team and, unfortunately, sometimes its morgue. Its medical professionals are incredibly overworked as a result. Most notable is the fact that UMC-SM houses metro LA's only certified medical examiner (as opposed to coroner), Dr. Jeanne Hasper.`,\n    gps: [-118.488343, 34.0270141],\n  },\n  {\n    name: 'Old Chinatown Plaza',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Chinatown',\n    blurb: `The main plaza of historic old Chinatown, moved to its current location along with the new Chinatown, it remains a popular tourist spot. Within the plaza, there are a number of shops to enjoy food and entertainment, as well as space to host special events. One famous event is the KCRW Summer Nights event in which the community is invited to party until midnight, dancing to live music, dining at local food trucks, and participating in cultural workshops. Typically there is a craft beer garden, several cooking demonstrations, and an old-world, vintage market that sells odd and ends. The area is known for flashy neon lights coexisting alongside traditional paper lanterns and Japanese-influenced architecture.`,\n    gps: [-118.2381017, 34.0652019],\n  },\n  {\n    name: 'Shitty 7-11',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Inner City',\n    blurb: `A rundown \"7-11\" located in the endlessly nondescript streets and alleys of the LA inner city area. It provides all amenities expected of a 7-11, including Slurpi® frozen ice cream slushie drinks, snacks, weed, crack, heroin, blood, and cheap coffee-like liquid.`,\n    gps: [-118.3419317, 33.978092],\n  },\n  {\n    name: 'Wildlife Assurance Agency',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Inner City',\n    blurb: `The perfectly normal office of the Wildlife Assurance Agency. Despite its name, there don't seem to be much in the way of wildlife here, nor does the security seem normal for an environment-related organization.`,\n    gps: [-118.2476909, 33.9965424],\n  },\n  {\n    name: 'FBI Surveillance Team #5',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Eastside LA',\n    blurb: `Although the main LA FBI location is to the north-east of Santa Monica, another publicly owned location is available in the fringe of Eastside LA. Precious little is known about the activities conducted in the fenced-off parking lot and accompanying adobe-red buildings.`,\n    gps: [-118.1587112, 34.0160868],\n  },\n  {\n    name: 'Last Call Bar',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Inner City',\n    blurb: `The Last Call Bar is a generic decently sized bar located within the Inner City of Los Angeles that is a common hangout for many of the local punks and goths in the city. While it isn't explicitly a kindred's domain, it is rumored that a kindred's herd hangs out here constantly, so it's recommended to tread carefully.`,\n    gps: null,\n  },\n  {\n    name: 'YMCA of Metropolitan Los Angeles',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Koreatown',\n    blurb: `The Y of Metropolitan LA is a five story glass-facade building (including basement levels) that hosts facilities such as an indoor basketball court, swimming pool, gym and community arts lessons. Due to its non-profit nature as well as its underground parking lot, the Y serves as a popular place for those who wish to use sports facilities, especially by lower-income families in the inner city area.`,\n    gps: [-118.2948052, 34.055616],\n  },\n  {\n    name: 'Santa Monica Pier',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Santa Monica',\n    blurb: `The Santa Monica Pier was constructed in 1909 and is considered a historic L.A. landmark. The pier is a popular hangout for tourists during the day and a place for lowlifes and punks to hang out at night. The main street features a number of small businesses and facilities, including a ball room, an arcade hall, and an old carousel among other attractions. Here you can test your wits at a game of skill or take in some of the local culture. Down below the storefronts, the ocean water laps at the shore of Santa Monica's sandy beach area. It's not much of a sight, but young kids like to post up there during odd hours of the night, sitting around campfires and doing who knows what else. You meet some interesting characters out there, but none of them seem to have anything better to do than stand around and watch the fire crackling into the night sky. There are several stairways leading to various locations, but the locals know not to stray too far, due to shady characters lurking around the beach.`,\n    gps: [-118.4999956, 34.0090398],\n  },\n];\n\nconst pois_outskirts = [\n  {\n    name: 'Arcadia Arboretum',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Outskirts',\n    blurb: `The Los Angeles County Arboretum and Botanic Garden, 127 acres, is an arboretum, botanical garden, and historical site nestled into hills near the San Gabriel Mountains, at 301 North Baldwin Avenue, Arcadia, California, United States.`,\n    gps: [-118.0535515, 34.1445338],\n  },\n  {\n    name: 'Brothers Salvage',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Outskirts',\n    blurb: `Not much can be said about Brother's Salvage, except it's the preferred meeting place of the local Gangrel. The rusted gates are locked off from prying eyes, but if you were to hop the fence, you'd find nothing but heaps of scrap parts and chassis from busted old vehicles. Be careful not to make too much noise, if you do decide to venture in there to take a peek. The property owners keep a mean, old guard dog in the lot, likely to bite your hand clean off if he sniffs you out. Truth is, there's not much of a reason to be there unless you're looking to replace the door to your dad's broken down truck from the 70s. Sure, a junkyard may seem interesting, but it's no playground. Sharp metal and columns of poorly stacked cars can be a real hazard if you're not paying attention. Best to steer clear of that place until you have a good reason. During the day, the small office is open from 10 to 6, but you never really know which brother is going to be there, if any.`,\n    gps: [-118.1135306, 34.1165886],\n  },\n  {\n    name: 'Giovanni Mansion',\n    kind: 'poi',\n    poitype: 'normal',\n    parent: 'Outskirts',\n    blurb: `The Giovanni family is well known throughout Los Angeles for being wealthy, powerful, and dangerously influential. They are infamous for their political and personal affairs and for throwing their weight around to get what they want. The Giovanni Stronghold is a large estate with well-kept grounds, surrounded by heavily wooded acres of land. The compound itself is walled off and monitored by security on a constant basis. The mansion is as cold as it is beautiful, made of greystone and lime, with six towering marble columns holding up the roof to the carport overhang. In the center of the circular, roundabout at the forefront of the mansion, sits an elaborate stone fountain, which filters pure, crystalline water 24/7. If all this wasn't enough to convince outsiders of their wealth and prestige, they would be dazzled by the innards of the facility. Decadent fabrics, polished brass, marble, and glass adorn the interior. Rooms upon rooms exist solely to make the place feel disturbingly vacant.`,\n    gps: [-118.64978, 34.1603473]\n  },\n  {\n    name: 'Abandoned Warehouse (Industry)',\n    kind: 'poi',\n    poitype: 'elysium',\n    parent: 'Outskirts',\n    blurb: `Once a private storage facility, the dilapidated warehouse now only known as “Industrial” is located within the heart of LA’s industrial district. It is a rather large space with hanging fluorescent lights connected to a central generator.\\nOn the first level there is a makeshift bar set up with both bottles of booze, blood, and blood spiked with various substances available. The rest of the floor is littered with couches, tables, a pool table, and other such things that could (and shouldn’t) be found in a bar.\\nThe second level made up entirely of shoddy catwalks bolted to the sides and across the ceiling of the building.There is a singular office at the top which Baron Baldwin resides for the celebration. Beside the door and it’s guards, there is a small stand with a dispenser of tickets and the sign “take a number” above it.`,\n    gps: [-117.9566902, 34.0091277],\n  },\n];\n\nexport const POIS = preprocess_region(pois_downtown.concat(pois_hollywood, pois_innercity, pois_outskirts));\n","import { MAX_SCALE } from './constants';\nimport * as _slugify from 'slugify';\n\n/**\n * @typedef {Object} ZoomTransform\n * @property {number[]} t - An array of length 2 that depicts the translate amount.\n * @property {number} k - The scale factor\n */\n\n/**\n * Provided a bounding box for an SVG, return a zoom transform info object\n * @param {SVGRect} bbox - What is returned from an SVGGraphicsElement.getBBox() call of the element we want to get a zoom transform for.\n * @returns {ZoomTransform} The zoom transform to center that element\n */\nexport function transformFromBbox(bbox) {\n  const dx = bbox.width;\n  const dy = bbox.height;\n  const x = bbox.x + dx / 2;\n  const y = bbox.y + dy / 2;\n  // scale\n  const k = Math.max(1, Math.min(MAX_SCALE, 0.8 / Math.max(dx / 960, dy / 500)));\n  // translate\n  const t = [960 / 2 - k * x, 500 / 2 - k * y];\n  return { k, t };\n}\n\nexport function region_comparefunc(a, b) {\n  let score = 0;\n  if (a.properties.kind === 'neighborhood') {\n    score -= 10;\n  }\n  if (b.properties.kind === 'neighborhood') {\n    score += 10;\n  }\n  if (a.properties.name > b.properties.name) {\n    score += 1;\n  } else if (a.properties.name < b.properties.name) {\n    score -= 1;\n  }\n  return score;\n}\n\nexport function slugify(s) {\n  return _slugify(s.replace(/[)(]/gi, ''));\n}\n","import * as d3 from 'd3-selection';\nimport * as d3geo from 'd3-geo';\nimport * as d3zoom from 'd3-zoom';\n\nimport * as CON from './constants';\n\nvar maptransform = d3.select('#maptransform');\nexport var CURRENT_FOCUS = 'Los Angeles County'; // To track the zoom-in zoom-out on click\nexport function set_current_focus(newfocus) {\n  CURRENT_FOCUS = newfocus;\n}\n\nexport var ZOOM = d3zoom.zoom()\n  .scaleExtent([.5, CON.MAX_SCALE])\n  .on('zoom', () => {\n    const t = d3.event.transform;\n    maptransform.attr('transform', `translate(${t.x}, ${t.y}) scale(${t.k})`);\n  });\n\nexport var LAMap = d3.select('#lamap')\n  .call(ZOOM);\n\nexport var projection = d3geo.geoMercator()\n.rotate(CON.LA_ROTATE)\n.translate(CON.LA_TRANSLATE)\n.scale(CON.LA_SCALE);\n\nexport var geo = d3geo.geoPath(projection);\n\nexport var all_regions = [CON.LA];\nexport var all_regions_map = new Map();\nall_regions_map.set('Los Angeles County', CON.LA);\n\nexport function concat_regions(arr) {\n  all_regions = all_regions.concat(arr);\n  for (let region of arr) {\n    all_regions_map.set(region.properties.name, region);\n  }\n}\n","import * as d3 from 'd3-selection';\nimport * as d3zoom from 'd3-zoom';\n\nimport { geo, all_regions, all_regions_map } from './globals';\nimport * as G from './globals';\nimport * as util from './utility';\n\n\nlet PREV_ZOOM = 1;\n\n// Do zoom\nfunction zoom_to(zoomtarget) {\n  d3.select('#lamap')\n    .call(G.ZOOM.transform, d3zoom.zoomIdentity.translate(zoomtarget.t[0], zoomtarget.t[1]).scale(zoomtarget.k));\n}\n\nfunction highlight(d, yes) {\n  d3.select('#' + util.slugify(d.properties.name))\n    .classed('highlighted', yes);\n}\n\nfunction do_highlight(d) {\n  highlight(d, true);\n}\n\nfunction un_highlight(d) {\n  highlight(d, false);\n}\n\nfunction update_sidebar(d, name, childdata) {\n  d3.select('#region-name')\n    .text(name);\n  \n  const blurb = d.properties.blurb ? d.properties.blurb : '';\n  d3.select('#region-desc')\n    .html('')\n    .selectAll('p')\n    .data(blurb.split('\\n'))\n    .enter()\n    .append('p')\n    .html(d => d);\n  \n  if (d.properties.poitype) {\n    d3.select('#poitype')\n      .text(`(${d.properties.poitype})`);\n  } else {\n    d3.select('#poitype')\n      .text('');\n  }\n\n  let childs = d3.select('#region-children')\n    .selectAll('.region-child')\n    .data(childdata, d => d.properties.name);\n  childs.enter()\n    .append('li')\n    .classed('region-child', true)\n    .merge(childs)\n    .each(function(d) {\n      let sel = d3.select(this);\n      if (d.properties.kind === 'poi') {\n        sel.classed(`type-poi poi-${d.properties.poitype}`, true);\n      } else {\n        sel.classed(`type-${d.properties.kind}`, true);\n      }\n    })\n    .append('span')\n    .classed('content', true)\n    .text(d => d.properties.name)\n    .on('click', d => {\n      // Dehighlight, if needed\n      un_highlight(d);\n      // Focus the given location\n      focus_region(d.properties.name);\n    })\n    .on('mouseover', do_highlight)\n    .on('mouseout', un_highlight);\n  childs.exit()\n    .remove();\n\n  // Enable back button, if applicable\n  if (d.properties.parent) {\n    d3.select('#go-back')\n      .classed('active', true)\n      .on('click', () => {\n        focus_region(d.properties.parent);\n      });\n  } else { // Disable otherwise\n    d3.select('#go-back')\n      .classed('active', false);\n  }\n}\n\n// Also focuses the region in question\nexport function focus_region(regionname) {\n  const d = all_regions_map.get(regionname);\n\n  let childdata = [], name, zoomtarget;\n  if (G.CURRENT_FOCUS === d.properties.name && G.CURRENT_FOCUS !== 'Los Angeles County') {\n    focus_region('Los Angeles County');\n    return;\n  } else {\n    // Zoom to new target\n    name = d.properties.name;\n    zoomtarget = d.properties.transform;\n    // Sort first by neighborhoods > locations, then alphabetically\n    childdata = all_regions.filter(datum => datum.properties.parent === name);\n    childdata.sort(util.region_comparefunc);\n  }\n  G.set_current_focus(name);\n\n  // Select current region on map\n  d3.selectAll('.region')\n    .classed('selected', d => d.properties.name !== 'Los Angeles County' && d.properties.name === G.CURRENT_FOCUS);\n\n  // Don't zoom if no gps coordinates\n  if (d.properties.gps !== null)\n    zoom_to(zoomtarget);\n\n  update_sidebar(d, name, childdata);\n}\n\nconst _defaultRenderGeojsonCallback = d => {};\nexport function render_geojson(id, classname, features, callback) {\n  callback = callback || _defaultRenderGeojsonCallback;\n  d3.select(id)\n    .selectAll('path')\n    .data(features)\n    .enter()\n    .append('path')\n    .classed(classname, true)\n    .classed('neighborhood', d => d.properties.kind === 'neighborhood')\n    .attr('d', geo)\n    .attr('id', d => util.slugify(d.properties.name))\n    .style('fill', d => d.properties.color)\n    .each(function(d) {\n      d.properties.transform = util.transformFromBbox(this.getBBox());\n    })\n    .on('mouseover', callback)\n    .on('click', d => focus_region(d.properties.name));\n}\n","import * as topojson from 'topojson';\nimport { topology as geo2topo } from 'topojson-server';\nimport * as d3 from 'd3-selection';\nimport * as d3shape from 'd3-shape';\nimport * as CON from './constants';\nimport * as util from './utility';\n\nimport { render_geojson, focus_region } from './interactions';\nimport { geo, concat_regions, projection } from './globals';\n\nimport '../styles/index.scss';\n\n\n// accept geojson features, and regiondefs array, then return list of region geojson objects\nfunction make_regions(features, regiondefs, namefunc) {\n  let topo = geo2topo(features);\n  // Index neighborhoods by name\n  let hoods = new Map();\n  Object.values(topo.objects).forEach(e => hoods.set(namefunc(e), e));\n  let regions = regiondefs.map(info => {\n    if (typeof(info.neighborhoods) === 'string') {\n      return { info, polys: [hoods.get(info.neighborhoods)] };\n    } else {\n      return { info, polys: info.neighborhoods.map(d => hoods.get(d)) };\n    }\n  });\n  return regions.map(d => {\n    try {\n      let obj = topojson.merge(topo, d.polys);\n      obj.properties = {name: d.info.name, ...d.info};\n      return obj;\n    } catch (error) {\n      console.error(`While parsing region ${d.info.name}:`);\n      console.error(error);\n      return null;\n    }\n  }).filter(d => d !== null);\n}\n\n///////////////// The actual initialization /////////////////\nPromise.all([\n  fetch('public/neighborhoods-geo.json')\n    .then(res => {\n      return res.json();\n    })\n    .then(geojson => {\n      geojson.features = geojson.features.filter(d => !CON.EXCLUDED_NEIGHBORHOODS.has(d.properties.name));\n      // d3.select('#neighborhoods')\n      //   .selectAll('.latimes-neighborhood')\n      //   .data(geojson.features)\n      //   .enter()\n      //   .append('path')\n      //   .classed('latimes-neighborhood', true)\n      //   .attr('d', geo)\n      //   .on('mouseover', d => console.log(d.properties.name));\n      let regionfeatures = make_regions(geojson.features, CON.REGIONS, d => d.properties.name)\n      concat_regions(regionfeatures);\n      render_geojson('#small-regions', 'region', regionfeatures);\n    }),\n\n  fetch('public/city-planning.json')\n    .then(res => {\n      return res.json();\n    })\n    .then(geojson => {\n      let regionfeatures = make_regions(geojson.features, CON.LARGE_REGIONS, d => d.properties.AREA_NAME);\n      concat_regions(regionfeatures);\n      render_geojson('#large-regions', 'region', regionfeatures);\n    })\n])\n.then(d => focus_region('Los Angeles County'));\n\n\nfetch('public/tiles.topojson')\n  .then(res => res.json())\n  .then(topo => {\n    d3.select('#basemap')\n      .append('path')\n      .classed('water', true)\n      .datum(topojson.feature(topo, topo.objects.water))\n      .attr('d', geo);\n    d3.select('#basemap')\n      .append('path')\n      .classed('earth', true)\n      .datum(topojson.feature(topo, topo.objects.earth))\n      .attr('d', geo);\n  })\n\n// Also render PoIs\nconst pois = CON.POIS.map(d => ({\n  'type': 'Feature',\n  geometry: {\n    'type': 'Point',\n    coordinates: d.gps ? d.gps : [-1, -1]\n  },\n  properties: {\n    ...d\n  }\n}));\nconcat_regions(pois);\n\n\nlet symbolgen = d3shape.symbol().size(4);\nd3.select('#pois')\n  .selectAll('.poi')\n  .data(pois)\n  .enter()\n  .append('path')\n  .classed('region', true)\n  .each(function(d) {\n    // Set appropriate transform to focus\n    const coords = projection(d.geometry.coordinates);\n    d.properties.transform = util.transformFromBbox({ x: coords[0], y: coords[1], width: 8, height: 8});\n  })\n  .attr('id', d => util.slugify(d.properties.name))\n  .attr('transform', d => `translate(${projection(d.geometry.coordinates)})`)\n  .attr('d', d => symbolgen.type(CON.SYMBOLS[d.properties.poitype])())\n  .on('click', d => focus_region(d.properties.name));\n"],"sourceRoot":""}